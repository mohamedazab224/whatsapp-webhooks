# ุฏููู ุฅุนุฏุงุฏ Azure OpenAI Agent

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ Azure OpenAI Agent ููุฑุฏ ุงูุชููุงุฆู ุงูุฐูู ุนูู ุฑุณุงุฆู ุงูุนููุงุก ูุฅุฏุงุฑุฉ ุทูุจุงุช ุงูุตูุงูุฉ ุจุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู.

---

## ุงููุนุฑูุงุช ุงููุทููุจุฉ

\`\`\`env
AZURE_OPENAI_KEY=B9miWBdymm8e4BUFoxDMqs4UB7luinaBG7c22i5uNwOGn5zNaNE3JQQJ99BKACYeBjFXJ3w3AAABACOG8ZhR
AZURE_OPENAI_DEPLOYMENT=AzaBot
AZURE_OPENAI_ENDPOINT=https://azabotai.openai.azure.com
AZURE_OPENAI_KEY2=B4CcYQDenUwAd4FTSJg0TRIL4yDYP2qRoHS0EHsF8Wwe4lkfJN0sJQQJ99BKACYeBjFXJ3w3AAABACOGlr31
\`\`\`

---

## ุงููููุฒุงุช

### 1. ุงูุฑุฏ ุงูุชููุงุฆู ุงูุฐูู
- ุฑุฏ ููุฑู ุนูู ุฑุณุงุฆู ุงูุนููุงุก
- ููู ุงููุบุฉ ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- ุณูุงู ุงููุญุงุฏุซุฉ ูุญููุธ ููู ุนููู

### 2. ุฅูุดุงุก ุทูุจุงุช ุงูุตูุงูุฉ
ูููู AI Agent ุชููุงุฆูุงู ุจุฅูุดุงุก ุทูุจ ุตูุงูุฉ ุนูุฏ:
- ุงุณุชุฎุฏุงู ุงูุนููู ููููุงุช ูุซู: "ุทูุจ ุตูุงูุฉ"ุ "ูุญุชุงุฌ ููู"ุ "ุญุฌุฒ ููุนุฏ"
- ุชุญุฏูุฏ ููุน ุงููุดููุฉ (ุณุจุงูุฉุ ููุฑุจุงุกุ ุชููููุ ุฅูุฎ)
- ุชุตููู ุงูุทูุงุฑุฆ (ุนุงุฏูุ ูููุ ุนุงุฌู)

### 3. ุฃููุงุน ุงูุฎุฏูุงุช ุงููุฏุนููุฉ

| ุงููุฆุฉ | ุงููุตู | ุฃูุซูุฉ |
|------|-------|-------|
| ุงูุณุจุงูุฉ | ุชุณุฑูุจ ููุงูุ ุงูุณุฏุงุฏ ูุฌุงุฑูุ ุฎุฒุงูุงุช | "ุนูุฏู ุชุณุฑูุจ ูุงุก" |
| ุงูููุฑุจุงุก | ูุดุงูู ููุฑุจุงุฆูุฉุ ุฅุถุงุกุฉุ ุชูุฏูุฏุงุช | "ุงูููุฑุจุงุก ููุทูุนุฉ" |
| ุงูุชูููู | ุตูุงูุฉ ููููุงุชุ ุชุนุจุฆุฉ ูุฑูููุ ุชูุธูู | "ุงููููู ูุง ูุจุฑุฏ" |
| ุงููุฌุงุฑุฉ | ุตูุงูุฉ ุฃุจูุงุจุ ููุงูุฐุ ุฃุซุงุซ | "ุงูุจุงุจ ููุณูุฑ" |
| ุงูุฏูุงู | ุฏูุงูุงุชุ ุชุดุทูุจุงุช | "ุงุจุบู ุฏูุงู" |
| ุฃุฎุฑู | ุฃู ุฎุฏูุงุช ุตูุงูุฉ ุฃุฎุฑู | - |

---

## ููู ูุนูู

### 1. ุงุณุชูุจุงู ุงูุฑุณุงูุฉ
\`\`\`
ุนููู โ WhatsApp โ Webhook โ AI Agent
\`\`\`

### 2. ูุนุงูุฌุฉ ุงูุฑุณุงูุฉ
\`\`\`javascript
// AI Agent ูููู ุจู:
1. ููู ุณูุงู ุงููุญุงุฏุซุฉ
2. ุชุญุฏูุฏ ููุน ุงูุทูุจ
3. ุงุณุชุฎุฑุงุฌ ุงููุนูููุงุช (ููุน ุงูุฎุฏูุฉุ ุงูุทูุงุฑุฆ)
4. ุชูููุฏ ุฑุฏ ููุงุณุจ
5. ุฅูุดุงุก ุทูุจ ุตูุงูุฉ ุฅุฐุง ูุฒู
\`\`\`

### 3. ุฅุฑุณุงู ุงูุฑุฏ
\`\`\`
AI Agent โ WhatsApp API โ ุนููู
\`\`\`

---

## ุฃูุซูุฉ ุนูู ุงููุญุงุฏุซุงุช

### ูุซุงู 1: ุทูุจ ุตูุงูุฉ ุณุจุงูุฉ

**ุงูุนููู:**
\`\`\`
ุงูุณูุงู ุนููููุ ุนูุฏู ุชุณุฑูุจ ูุงุก ูู ุงููุทุจุฎ ุถุฑูุฑู
\`\`\`

**AI Agent:**
\`\`\`
ูุนูููู ุงูุณูุงู ูุฑุญูุฉ ุงููู ูุจุฑูุงุชู ๐

ุชู ุงุณุชูุงู ุทูุจูู ุจุฎุตูุต ุชุณุฑูุจ ุงูููุงู ูู ุงููุทุจุฎ.

๐ ุชูุงุตูู ุงูุทูุจ:
- ุงูููุน: ุณุจุงูุฉ
- ุงููุณุชูู: ุนุงุฌู
- ุฑูู ุงูุทูุจ: REQ-1234567890

ุณูุชู ุงูุชูุงุตู ูุนูู ูู ูุจู ุงูููู ุงููุฎุชุต ุฎูุงู 30 ุฏูููุฉ.

ูู ููุงู ุชูุงุตูู ุฅุถุงููุฉ ุชูุฏ ุฅุถุงูุชูุงุ
\`\`\`

### ูุซุงู 2: ุงุณุชูุณุงุฑ ุนุงู

**ุงูุนููู:**
\`\`\`
ูู ุณุนุฑ ุตูุงูุฉ ุงูููููุ
\`\`\`

**AI Agent:**
\`\`\`
ุฃููุงู ุจู! ๐

ุฃุณุนุงุฑ ุตูุงูุฉ ุงูููููุงุช:
โข ุชูุธูู ุนุงุฏู: 150 ุฑูุงู
โข ุชูุธูู ุดุงูู: 250 ุฑูุงู
โข ุชุนุจุฆุฉ ูุฑููู: 200 ุฑูุงู
โข ุตูุงูุฉ ูุงููุฉ: 400 ุฑูุงู

ูู ุชุฑูุฏ ุญุฌุฒ ููุนุฏ ูุตูุงูุฉ ุงูููููุ
\`\`\`

### ูุซุงู 3: ุชุญููู ููููุธู

**ุงูุนููู:**
\`\`\`
ุงุจุบู ุงุชููู ูุน ููุธู
\`\`\`

**AI Agent:**
\`\`\`
ุญุงุถุฑุ ุณุฃุญููู ูุฃุญุฏ ููุธูู ุฎุฏูุฉ ุงูุนููุงุก ุงูุขู... โณ

โ [ูุชู ุงูุชุญููู ูููุธู ุจุดุฑู]
\`\`\`

---

## ุงูุชูุงูู ูุน Webhook Router

AI Agent ูุชูุงูู ูุน ูุธุงู Webhook Router:

\`\`\`javascript
// ูู webhook/route.ts
if (routing.action === "bot" && message.text?.body) {
  // ุงุณุชุฏุนุงุก AI Agent
  const aiResponse = await azureOpenAIAgent.respondToMessage(
    message.from,
    message.text.body
  )
  
  // ุฅุฑุณุงู ุงูุฑุฏ
  await sendWhatsAppMessage({
    phoneNumber: message.from,
    message: aiResponse
  })
}
\`\`\`

---

## ูุงุฌูุฉ ุฅุฏุงุฑุฉ AI Agent

### ุงููุตูู
\`\`\`
http://yourdomain.com/control โ ุชุงุจ "AI Agent"
\`\`\`

### ุงููููุฒุงุช ุงููุชุงุญุฉ:

1. **ุงูุฅุญุตุงุฆูุงุช**
   - ุฅุฌูุงูู ุงููุญุงุฏุซุงุช
   - ุนุฏุฏ ุทูุจุงุช ุงูุตูุงูุฉ
   - ุงูุทูุจุงุช ููุฏ ุงูุงูุชุธุงุฑ
   - ุงูุทูุจุงุช ุงูุนุงุฌูุฉ

2. **ุฅุฏุงุฑุฉ ุงูุทูุจุงุช**
   - ุนุฑุถ ุฌููุน ุทูุจุงุช ุงูุตูุงูุฉ
   - ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ
   - ููุชุฑุฉ ุญุณุจ ุงููุฆุฉ ูุงูุฃููููุฉ

3. **ุงูุฅุฌุฑุงุกุงุช ุงููุชุงุญุฉ**
   - ุชุบููุฑ ุงูุญุงูุฉ: ููุฏ ุงูุชูููุฐ
   - ุชุบููุฑ ุงูุญุงูุฉ: ููุชูู
   - ุฅูุบุงุก ุงูุทูุจ

---

## API Endpoints

### 1. ุงูุญุตูู ุนูู ุทูุจุงุช ุงูุตูุงูุฉ
\`\`\`bash
GET /api/ai-maintenance
\`\`\`

**Response:**
\`\`\`json
{
  "success": true,
  "requests": [
    {
      "id": "REQ-1234567890",
      "customerPhone": "966xxxxxxxxx",
      "issueDescription": "ุชุณุฑูุจ ูุงุก ูู ุงููุทุจุฎ",
      "urgency": "urgent",
      "category": "plumbing",
      "status": "pending",
      "createdAt": "2024-01-01T12:00:00.000Z"
    }
  ]
}
\`\`\`

### 2. ุชุญุฏูุซ ุญุงูุฉ ุทูุจ
\`\`\`bash
POST /api/ai-maintenance
Content-Type: application/json

{
  "requestId": "REQ-1234567890",
  "updates": {
    "status": "in_progress",
    "assignedTo": "ููู ูุญูุฏ"
  }
}
\`\`\`

### 3. ุฅุญุตุงุฆูุงุช AI Agent
\`\`\`bash
GET /api/ai-stats
\`\`\`

**Response:**
\`\`\`json
{
  "success": true,
  "stats": {
    "totalConversations": 45,
    "totalMaintenanceRequests": 12,
    "pendingRequests": 3,
    "urgentRequests": 1
  }
}
\`\`\`

---

## ุงูุชุฎุตูุต

### ุชุนุฏูู System Prompt

ูู ููู `lib/azure-openai-agent.ts`:

\`\`\`typescript
private getSystemPrompt(): string {
  return `ุฃูุช ูุณุงุนุฏ ุฐูู ูุดุฑูุฉ Uberfix...
  
  // ุฃุถู ุงูุชุฎุตูุตุงุช ููุง:
  - ูุนูููุงุช ุฅุถุงููุฉ ุนู ุงูุดุฑูุฉ
  - ุฃุณุนุงุฑ ูุญุฏุฏุฉ
  - ุณูุงุณุงุช ุฎุงุตุฉ
  - ูุบุฉ ุงูุฑุฏ ูุงูุฃุณููุจ
  `
}
\`\`\`

### ุฅุถุงูุฉ ูุฆุฉ ุฎุฏูุฉ ุฌุฏูุฏุฉ

\`\`\`typescript
// ูู extractCategory()
if (lowerText.includes("ุชูุธูู") || lowerText.includes("ูุธุงูุฉ")) {
  return "cleaning"
}
\`\`\`

### ุชุฎุตูุต Trigger Keywords

\`\`\`typescript
// ูู analyzeForMaintenanceRequest()
const requestKeywords = [
  "ุทูุจ ุตูุงูุฉ",
  "ูุญุชุงุฌ ููู",
  // ุฃุถู ูููุงุช ุฌุฏูุฏุฉ ููุง
  "ุนุงูุฒ ุฎุฏูุฉ",
  "ูููู ุชุฌู",
]
\`\`\`

---

## ุงูุฃูุงู ูุงูุฎุตูุตูุฉ

### ุญูุธ ุงูุจูุงูุงุช
- ุงููุญุงุฏุซุงุช ูุญููุธุฉ ูู ุงูุฐุงูุฑุฉ (RAM)
- ุขุฎุฑ 20 ุฑุณุงูุฉ ููุท ููู ุนููู
- ูุชู ูุณุญ ุงูุจูุงูุงุช ุนูุฏ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ

### ุญูุงูุฉ ุงููุนูููุงุช
- API Keys ูุฎุฒูุฉ ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
- ูุง ูุชู ุชุณุฌูู ุจูุงูุงุช ุญุณุงุณุฉ
- ุฌููุน ุงูุงุชุตุงูุงุช ุนุจุฑ HTTPS

---

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "Azure OpenAI API key not configured"

**ุงูุญู:**
1. ุชุฃูุฏ ูู ูุฌูุฏ `AZURE_OPENAI_KEY` ูู `.env.local`
2. ุชุญูู ูู ุตุญุฉ ุงูููุชุงุญ
3. ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ

### AI ูุง ูุฑุฏ

**ุชุญูู ูู:**
1. Webhook Router ููุฌู ููู Bot: `routing.action === "bot"`
2. ุงูุฑุณุงูุฉ ูุตูุฉ: `message.type === "text"`
3. Console logs: `[v0] AI response sent successfully`

### ุงูุฑุฏูุฏ ุจุทูุฆุฉ

**ุงูุญููู:**
- ุงุณุชุฎุฏู `max_tokens` ุฃูู (ุญุงููุงู 800)
- ููู `temperature` ููุฑุฏูุฏ ุงูุฃุณุฑุน
- ุงุณุชุฎุฏู deployment ุฃุณุฑุน

---

## ุงูุชุทููุฑ ุงููุณุชูุจูู

### ููุฒุงุช ูุฎุทุทุฉ:

1. **ุชูุงูู ูุน ูุงุนุฏุฉ ุจูุงูุงุช**
   - ุญูุธ ุงููุญุงุฏุซุงุช ุจุดูู ุฏุงุฆู
   - ุชุงุฑูุฎ ูุงูู ููู ุนููู

2. **ุชุญูููุงุช ูุชูุฏูุฉ**
   - ุชูุงุฑูุฑ ุงูุฃุฏุงุก
   - ูุนุฏู ุงูุฑุถุง
   - ุฃููุงุช ุงูุฐุฑูุฉ

3. **Multilingual Support**
   - ุฏุนู ูุบุงุช ุฅุถุงููุฉ
   - ุชุฑุฌูุฉ ุชููุงุฆูุฉ

4. **Rich Media Responses**
   - ุฅุฑุณุงู ุตูุฑ ูููุฏูููุงุช
   - ููุงุฆู ุชูุงุนููุฉ
   - ุฃุฒุฑุงุฑ ุฏููุงููููุฉ

---

## ุงูุฏุนู ุงูููู

ูููุณุงุนุฏุฉ ุฃู ุงูุฃุณุฆูุฉ:
- ุฑุงุฌุน: `PRODUCTION_SETUP.md`
- Documentation: `README.md`
- Azure OpenAI Docs: [docs.microsoft.com](https://learn.microsoft.com/en-us/azure/ai-services/openai/)

---

โ **Azure OpenAI Agent ุฌุงูุฒ ููุนูู!**
